<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MonacaICE</title>
  <base href="/">

  <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"> -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' ws://127.0.0.1:8000 https://mb.api.cloud.nifty.com/2013-09-01/classes/TestClass data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <!-- <script type="text/javascript" src="cordova.js"></script> -->
  <!-- 手動追加分（開始） -->
  <script src="components/loader.js"></script>
  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="css/style.css">
  <script>
    // APIキーの設定とSDK初期化
    var ncmb = new NCMB("6bd8058cbda8e2aa448c573d4e4e99e720043297687f3e809965040d12a1a42e","df5ed64b51406dd6d254abece09f56e685f38862dbdc5c2ebefdfeec7588ac98");
    // ↓　ここにサンプルコードを実装　↓
    // 保存先クラスの作成
    var TestClass = ncmb.DataStore("TestClass");

    // 保存先クラスのインスタンスを生成
    var testClass = new TestClass();

    // 値を設定と保存
    testClass.set("message", "Hello, NCMB!")
            .save()
            .then(function(object){
                // 保存に成功した場合の処理

            })
            .catch(function(err){
                // 保存に失敗した場合の処理

            });
    // PhoneGap event handler
    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady(){

    window.NCMB.monaca.setHandler
    (
            function(jsonData){
              alert("callback :::" + JSON.stringify(jsonData));
            }
        );
        window.NCMB.monaca.setDeviceToken(
                                    "6bd8058cbda8e2aa448c573d4e4e99e720043297687f3e809965040d12a1a42e",
                                    "df5ed64b51406dd6d254abece09f56e685f38862dbdc5c2ebefdfeec7588ac98",
                                    "sender_id"
                                    );
    }
    function getInstallationId() {
        window.NCMB.monaca.getInstallationId(
        function(id) {
          alert("installationID is: " + id);
        }
      );
    }
    window.alert('script worked!');
  </script>
  <!-- 手動追加分（終了） -->
</head>
<body>
  <h1>Nifty Push Notification Starter</h1>
  
  <br/><br/>
  <input type="button" onClick="getInstallationId()" value="getInstallationID" />
  <mi-root></mi-root>
</body>
</html>
